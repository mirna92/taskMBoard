<div class="flex m-10 items-center">
  <button
    (click)="onEdit(null)"
    class="flex gap-5 px-6 py-3 bg-gray-200 hover:border-gray-300 hover:border-2 hover:border-solid text-gray-600 font-semibold rounded-lg shadow-sm hover:text-gray-800 w-52"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="red"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      class="lucide lucide-square-plus-icon lucide-square-plus"
    >
      <rect width="18" height="18" x="3" y="3" rx="2" />
      <path d="M8 12h8" />
      <path d="M12 8v8" />
    </svg>
    Add New Task
  </button>
</div>
<div class="grid lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1 m-auto">
  <div
    [ngStyle]="{
      'border-color':
        status == 'todo'
          ? 'rgb(220 38 38)'
          : status == 'in-progress'
          ? '#075985'
          : 'rgb(22, 101, 52)'
    }"
    class="lg:w-full shadow-lg border-t-8 bg-gray-100 rounded-lg"
    *ngFor="let status of statuses"
  >
    <h2 class="font-extrabold text-lg text-center my-5">
      {{ status | titlecase }}
    </h2>
    <div
      class="flex flex-col"
      [id]="status"
      cdkDropList
      [cdkDropListData]="
        status === 'todo'
          ? todoTasks
          : status === 'in-progress'
          ? inProgressTasks
          : doneTasks
      "
      (cdkDropListDropped)="onDrop($event)"
      [cdkDropListConnectedTo]="statuses"
    >
      <div
        *ngIf="
          (status === 'todo'
            ? todoTasks
            : status === 'in-progress'
            ? inProgressTasks
            : doneTasks
          )?.length == 0
        "
        class="text-gray-400 text-center italic p-4 border border-dashed rounded"
      >
        No tasks
      </div>
      <div
        *ngFor="
          let task of status === 'todo'
            ? todoTasks
            : status === 'in-progress'
            ? inProgressTasks
            : doneTasks
        "
        class="m-2"
      >
        <div
          class="bg-primary-100 border-1 border-white p-5 rounded-sm shadow-sm cursor-grab"
          cdkDrag
          [cdkDragData]="task"
        >
          <h3><span>Title:</span> {{ task.title }}</h3>
          <p><span>Description:</span> {{ task.description }}</p>
          <p><span>Due:</span> {{ task.dueDate }}</p>

          <hr class="my-2" />
          <div class="flex">
            <button
              (click)="onEdit(task)"
              class="flex gap-2 justify-center m-auto px-2 py-3 bg-blue-100 text-gray-600 font-semibold rounded-lg shadow-sm hover:text-blue-800 lg:w-48 md:w-48 "
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="blue"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-file-pen-line-icon lucide-file-pen-line"
              >
                <path
                  d="m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2"
                />
                <path
                  d="M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"
                />
                <path d="M8 18h1" />
              </svg>

              Edit Task
            </button>

            <button
              (click)="onDeleteTask(task)"
              class="flex gap-2 justify-center m-auto px-2 py-3 bg-orange-50 text-gray-600 font-semibold rounded-lg shadow-sm hover:text-orange-800 lg:w-48 md:w-48 sm:w-36"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="orange"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-trash2-icon lucide-trash-2"
              >
                <path d="M3 6h18" />
                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" />
                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" />
                <line x1="10" x2="10" y1="11" y2="17" />
                <line x1="14" x2="14" y1="11" y2="17" />
              </svg>

              Delete Task
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
